# A股涨停预测系统 - Top10 主程序配置（云端GitHub运行）
version: "A-Share-Top10-Engine-V1"

runtime:
  timezone: "Asia/Shanghai"
  encoding: "utf-8"

project:
  universe: "A-share"
  target: "limit-up_continuation"
  top_n: 10

# 数据仓库（你已经就绪的那个“纯数据仓库”）
# 主程序会在 Actions 里把它 checkout 到本仓库的工作目录中
data_repo:
  owner: "njedu2023-prog"
  name: "a-share-top3-data"   # 注意：这里先写你现在的数据仓库名（后续你若改名，再改这里一行即可）
  ref: "main"
  checkout_dir: "_warehouse"  # 本仓库运行时的数据仓库本地目录名（Actions里用）

# 数据定位策略：支持多种常见目录结构自动探测
data_layout:
  # 交易日目录可能的候选位置（主程序会按顺序尝试，找到就用）
  trade_date_dirs:
    - "_warehouse/data/{trade_date}"
    - "_warehouse/data/snapshots/{trade_date}"
    - "_warehouse/data/daily/{trade_date}"
    - "_warehouse/data/{trade_date}/snapshots"
    - "_warehouse/data"

  # “交易日”识别规则：目录名或文件名中出现 8位日期 YYYYMMDD
  trade_date_pattern: "YYYYMMDD"

  # 快照文件候选（主程序会在 trade_date_dir 下按优先级寻找）
  # 你数据仓库实际叫什么文件名都可以，先覆盖常见口径；找不到会给出明确报错清单
  snapshot_candidates:
    limit_up_pool:
      - "limit_up_pool.csv"
      - "zt_pool.csv"
      - "limit_up.csv"
      - "pool_limitup.csv"

    dragon_tiger:
      - "dragon_tiger.csv"
      - "lhb.csv"

    open_high_close:
      - "ohlc.csv"
      - "daily_ohlc.csv"
      - "quotes.csv"

    concepts_hot:
      - "concept_hot.csv"
      - "hot_concepts.csv"
      - "themes_hot.csv"

    sectors_hot:
      - "sector_hot.csv"
      - "hot_sectors.csv"
      - "industry_hot.csv"

output:
  # 所有输出统一写到本仓库，便于 GitHub Pages / API / 人工查看
  base_dir: "outputs"
  predict_dir: "outputs/predict"
  verify_dir: "outputs/verify"
  logs_dir: "outputs/logs"

  # 本次运行输出的核心文件名（trade_date 会自动替换）
  files:
    predict_json: "outputs/predict/predict_{trade_date}.json"
    predict_md:   "outputs/predict/predict_{trade_date}.md"
    verify_json:  "outputs/verify/verify_{trade_date}.json"
    verify_md:    "outputs/verify/verify_{trade_date}.md"

scoring:
  # 五因子权重（先给默认工程可跑版本；你后续用PDF的权重我们再严格对齐）
  weights:
    w_limitup_momentum: 0.30
    w_order_imbalance:  0.20
    w_hot_concept:      0.20
    w_dragon_tiger:     0.15
    w_market_filter:    0.15

  # 分数到概率的映射（单调映射，保证可解释）
  prob_map:
    method: "sigmoid"
    k: 6.0
    x0: 0.50

learning:
  enabled: true
  history_window_days: 60
  # 核验结果沉淀（用于长期回测、命中率统计、后续自学习）
  storage:
    file: "outputs/verify/history.jsonl"
