# ============================================================
# A股涨停预测系统 - Top10 Engine 主程序配置（GitHub Actions 云端运行）
# Repo: a-share-top10-engine
# Data Repo: a-share-top3-data
# ============================================================

version: "A-Share-Top10-Engine-V1"

runtime:
  timezone: "Asia/Shanghai"
  encoding: "utf-8"

# ============================================================
# 项目基本信息
# ============================================================

project:
  universe: "A-share"
  target: "limit-up_continuation"
  top_n: 10

# ============================================================
# 数据仓库设置（纯数据仓库 a-share-top3-data）
# 主程序 Actions 执行时会自动 clone 到本地 _warehouse/
# ============================================================

data_repo:
  owner: "njedu2023-prog"
  name: "a-share-top3-data"
  ref: "main"
  checkout_dir: "_warehouse"

# ============================================================
# 数据目录布局（核心！）
# 必须严格匹配你仓库里的真实目录结构
# ============================================================

data_layout:

  # ------------------------------------------------------------
  # ✅交易日目录候选（按优先级依次尝试）
  #
  # 你真实结构是：
  # _warehouse/data/raw/2026/20260130/
  #
  # 所以必须加这一条，否则永远找不到交易日目录
  # ------------------------------------------------------------

  trade_date_dirs:

    # ✅主路径（你当前唯一正确路径）
    - "_warehouse/data/raw/2026/{trade_date}"

    # ✅未来扩展（后续如果你改结构也能兼容）
    - "_warehouse/data/raw/{trade_date}"
    - "_warehouse/data/{trade_date}"
    - "_warehouse/data/snapshots/{trade_date}"
    - "_warehouse/data/daily/{trade_date}"

    # ✅兜底：允许扫描整个 data 目录
    - "_warehouse/data"

  # ------------------------------------------------------------
  # 交易日识别规则：目录名必须包含 YYYYMMDD
  # ------------------------------------------------------------

  trade_date_pattern: "YYYYMMDD"

  # ============================================================
  # 快照文件候选名（系统会按顺序匹配）
  # 你真实文件叫 stk_limit.csv，所以必须加进来
  # ============================================================

  snapshot_candidates:

    # ----------------------------------------------------------
    # 涨停池（最重要）
    # ----------------------------------------------------------

    limit_up_pool:
      - "stk_limit.csv"          # ✅你真实文件名
      - "limit_up_pool.csv"
      - "zt_pool.csv"
      - "limit_up.csv"
      - "pool_limitup.csv"

    # ----------------------------------------------------------
    # 龙虎榜（预留）
    # ----------------------------------------------------------

    dragon_tiger:
      - "dragon_tiger.csv"
      - "lhb.csv"

    # ----------------------------------------------------------
    # 日线行情（预留）
    # ----------------------------------------------------------

    open_high_close:
      - "ohlc.csv"
      - "daily_ohlc.csv"
      - "quotes.csv"

    # ----------------------------------------------------------
    # 热门概念（预留）
    # ----------------------------------------------------------

    concepts_hot:
      - "concept_hot.csv"
      - "hot_concepts.csv"
      - "themes_hot.csv"

    # ----------------------------------------------------------
    # 热门行业板块（预留）
    # ----------------------------------------------------------

    sectors_hot:
      - "sector_hot.csv"
      - "hot_sectors.csv"
      - "industry_hot.csv"

# ============================================================
# 输出设置
# ============================================================

output:

  # 输出目录（主程序运行完写入这里）
  out_dir: "output"

  # 输出报告文件名
  report_file: "top10_report.md"

  # 是否保存 JSON 结构化输出
  save_json: true

  # JSON 输出文件名
  json_file: "top10_result.json"

# ============================================================
# 引擎运行模式
# ============================================================

engine:

  # 如果今天目录为空，则自动 fallback 最新交易日
  allow_fallback_latest: true

  # 若缺失关键文件，则直接报错退出
  strict_snapshot_check: true

  # Top10 输出是否强制补足
  enforce_top_n: true
